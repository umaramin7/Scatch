<%- include('./partials/header') %>

<div class="w-full min-h-screen p-8 bg-blue-100 text-white">
  <div class="max-w-4xl mx-auto bg-zinc-500 p-6 rounded-md">
    <% if (error && error.length>0) { %>
      <div class="bg-red-500 p-3 rounded mb-4 text-white"><%= error[0] %></div>
    <% } %>
    <% if (success && success.length>0) { %>
      <div class="bg-green-600 p-3 rounded mb-4 text-white"><%= success[0] %></div>
    <% } %>

    <h2 class="text-2xl mb-4">My Account</h2>

    <div class="grid grid-cols-2 gap-6">
      <!-- Left: Profile info -->
      <div>
        <h3 class="text-xl mb-2">Profile</h3>
        <p><strong>Name:</strong> <%= user.name %></p>
        <p><strong>Username:</strong> <%= user.username %></p>
        <p><strong>Email:</strong> <%= user.email %></p>
        <p><strong>Age:</strong> <%= user.age || 'â€”' %></p>

        <form action="/account/logout" method="get" class="mt-4">
          <button class="px-4 py-2 bg-red-500 rounded">Logout</button>
        </form>

        <form action="/account/delete" method="post" onsubmit="return confirm('Are you sure you want to delete your account? This is irreversible');" class="mt-3">
          <button type="submit" class="px-4 py-2 bg-red-700 rounded">Delete Account</button>
        </form>
      </div>

      <!-- Right: Edit profile & change password -->
      <div>
        <h3 class="text-xl mb-2">Edit Profile</h3>
        <form action="/account/update" method="post" class="space-y-3">
          <input name="name" value="<%= user.name %>" class="w-full p-2 rounded bg-zinc-900" placeholder="Full name" />
          <input name="username" value="<%= user.username %>" class="w-full p-2 rounded bg-zinc-900" placeholder="Username" />
          <input name="age" value="<%= user.age %>" class="w-full p-2 rounded bg-zinc-900" placeholder="Age" />
          <input name="email" value="<%= user.email %>" class="w-full p-2 rounded bg-zinc-900" placeholder="Email" />
          <button class="px-4 py-2 bg-blue-600 rounded">Save changes</button>
        </form>

        <h3 class="text-xl mt-6 mb-2">Change Password</h3>
        <form action="/account/change-password" method="post" class="space-y-3">
          <input name="currentPassword" type="password" class="w-full p-2 rounded bg-zinc-900" placeholder="Current password" />
          <input name="newPassword" type="password" class="w-full p-2 rounded bg-zinc-900" placeholder="New password" />
          <button class="px-4 py-2 bg-blue-600 rounded">Change Password</button>
        </form>
      </div>
    </div>

   
  </div>
</div>

<%- include('./partials/footer') %>
